(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{7802:(e,t,a)=>{Promise.resolve().then(a.bind(a,9760)),Promise.resolve().then(a.bind(a,8427))},8427:(e,t,a)=>{"use strict";a.d(t,{default:()=>r});var s=a(5155),l=a(2619),n=a.n(l),i=a(2115);function r(e){let{items:t,isAdmin:a,userName:l}=e,[r,c]=(0,i.useState)(""),[o,d]=(0,i.useState)(!0),[u,x]=(0,i.useState)(""),[m,h]=(0,i.useState)(""),[v,p]=(0,i.useState)("TODOS");function j(e){if(!e)return null;let t=new Date(e);return isNaN(t.getTime())?null:t}let f=(0,i.useMemo)(()=>{let e=r.trim().toLowerCase(),s=j(u),n=j(m);return t.filter(t=>{if(!a&&!(e=>{let t=(l||"").trim().toLowerCase();if(!t)return!1;let a=(e.voluntario||"").toLowerCase(),s=(e.ayudante||"").toLowerCase();return a===t||s===t||a.includes(t)||s.includes(t)})(t)||o&&"COMPLETADO"===t.estado||"TODOS"!==v&&t.estado!==v)return!1;let i=j(t.fechaFin)||j(t.fechaInicio);return(!s||!i||!(i<s))&&(!n||!i||!(i>n))&&(!e||!!"".concat(t.titulo||""," ").concat(t.descripcion||""," ").concat(t.voluntario||""," ").concat(t.ayudante||"").toLowerCase().includes(e))&&!0})},[t,r,o,v,u,m,a,l]);return(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"px-4 py-3 card-header flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h2",{className:"font-semibold",children:"Proyectos"}),(0,s.jsx)("div",{className:"text-sm text-[color:var(--muted)]",children:f.length})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[(0,s.jsx)("input",{className:"input",placeholder:"Buscar...",value:r,onChange:e=>c(e.target.value)}),(0,s.jsxs)("label",{className:"flex items-center gap-1",children:[(0,s.jsx)("input",{type:"checkbox",checked:o,onChange:e=>d(e.target.checked)}),(0,s.jsx)("span",{children:"Solo pendientes"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{children:"Desde"}),(0,s.jsx)("input",{type:"date",className:"input",value:u,onChange:e=>x(e.target.value)})]}),(0,s.jsxs)("label",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{children:"Hasta"}),(0,s.jsx)("input",{type:"date",className:"input",value:m,onChange:e=>h(e.target.value)})]}),(0,s.jsxs)("select",{className:"input",value:v,onChange:e=>p(e.target.value),children:[(0,s.jsx)("option",{value:"TODOS",children:"Todos"}),(0,s.jsx)("option",{value:"PLANIFICADO",children:"Sin empezar"}),(0,s.jsx)("option",{value:"EN_PROGRESO",children:"En curso"}),(0,s.jsx)("option",{value:"EN_PAUSA",children:"En pausa"}),(0,s.jsx)("option",{value:"COMPLETADO",children:"Completado"})]}),(0,s.jsx)(n(),{href:"/proyectos",className:"ml-auto btn btn-ghost",children:"Ir a Proyectos"})]})]}),0===f.length?(0,s.jsx)("div",{className:"p-4 text-sm text-[color:var(--muted)]",children:"Sin elementos."}):(0,s.jsx)("ul",{className:"divide-y divide-[color:var(--border)]",children:f.slice(0,12).map(e=>{let t=(Array.isArray(e.checklist)?e.checklist:[]).filter(e=>null==e?void 0:e.done).length,a=(Array.isArray(e.checklist)?e.checklist:[]).length,l=a?Math.round(t/Math.max(a,1)*100):0;return(0,s.jsxs)("li",{className:"px-4 py-3 flex items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("div",{className:"font-medium truncate",children:e.titulo}),(0,s.jsxs)("div",{className:"mt-1 flex items-center gap-2 text-xs text-[color:var(--muted)] truncate",children:[(0,s.jsx)("span",{className:"status-".concat(e.estado),children:e.estado.replace("_"," ")}),(0,s.jsxs)("span",{className:"truncate",children:[e.voluntario||"(sin supervisor)",e.ayudante?" \xb7 T\xe9cnico: ".concat(e.ayudante):""]})]})]}),(0,s.jsxs)("div",{className:"text-right text-sm text-[color:var(--foreground)] min-w-[200px]",children:[(0,s.jsxs)("div",{children:[e.fechaInicio?new Date(e.fechaInicio).toLocaleDateString():"",e.fechaFin?" â€“ ".concat(new Date(e.fechaFin).toLocaleDateString()):""]}),(0,s.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,s.jsx)("div",{className:"progress flex-1",children:(0,s.jsx)("span",{style:{width:"".concat(l,"%")}})}),(0,s.jsxs)("div",{className:"text-xs text-[color:var(--muted)]",children:[t," / ",a]})]})]})]},e._id)})})]})}},9760:(e,t,a)=>{"use strict";a.d(t,{default:()=>r});var s=a(5155),l=a(2619),n=a.n(l),i=a(2115);function r(e){let{items:t,isAdmin:a,userName:l}=e,[r,c]=(0,i.useState)(""),[o,d]=(0,i.useState)(""),[u,x]=(0,i.useState)("");function m(e){if(!e)return null;let t=new Date(e);return isNaN(t.getTime())?null:t}let h=(0,i.useMemo)(()=>{let e=m(r),s=m(o),n=u.trim().toLowerCase();return t.filter(t=>{if(t.completadoFecha||!a&&!(e=>{var t,a,s,n;let i=(l||"").trim().toLowerCase();if(!i)return!1;let r="".concat((null==(t=e.voluntarioId)?void 0:t.nombre)||""," ").concat((null==(a=e.voluntarioId)?void 0:a.apellido)||"").trim().toLowerCase(),c="".concat((null==(s=e.ayudanteId)?void 0:s.nombre)||""," ").concat((null==(n=e.ayudanteId)?void 0:n.apellido)||"").trim().toLowerCase();return r===i||c===i||r.includes(i)||c.includes(i)})(t))return!1;let i=m(t.asignadoFecha);if(e&&i&&i<e||s&&i&&i>s)return!1;if(n){var r,c,o,d,u;if(!"".concat((null==(r=t.fichaId)?void 0:r.titulo)||""," ").concat((null==(c=t.voluntarioId)?void 0:c.nombre)||""," ").concat((null==(o=t.voluntarioId)?void 0:o.apellido)||""," ").concat((null==(d=t.ayudanteId)?void 0:d.nombre)||""," ").concat((null==(u=t.ayudanteId)?void 0:u.apellido)||""," ").concat(t.notas||"").toLowerCase().includes(n))return!1}return!0})},[t,r,o,u,a,l]);return(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"px-4 py-3 card-header flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h2",{className:"font-semibold",children:"Asignaciones pendientes"}),(0,s.jsx)("div",{className:"text-sm text-[color:var(--muted)]",children:h.length})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[(0,s.jsx)("input",{className:"input",placeholder:"Buscar...",value:u,onChange:e=>x(e.target.value)}),(0,s.jsxs)("label",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{children:"Desde"}),(0,s.jsx)("input",{type:"date",className:"input",value:r,onChange:e=>c(e.target.value)})]}),(0,s.jsxs)("label",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{children:"Hasta"}),(0,s.jsx)("input",{type:"date",className:"input",value:o,onChange:e=>d(e.target.value)})]}),(0,s.jsx)(n(),{href:"/tareas",className:"ml-auto btn btn-ghost",children:"Ir a Tareas"})]})]}),0===h.length?(0,s.jsx)("div",{className:"p-4 text-sm text-[color:var(--muted)]",children:"Sin pendientes."}):(0,s.jsx)("ul",{className:"divide-y divide-[color:var(--border)]",children:h.slice(0,15).map(e=>{var t,a,l,n,i;return(0,s.jsxs)("li",{className:"px-4 py-3 flex items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("div",{className:"font-medium truncate",children:(null==(t=e.fichaId)?void 0:t.titulo)||"(sin t\xedtulo)"}),(0,s.jsxs)("div",{className:"mt-1 text-xs text-[color:var(--muted)] truncate",children:[e.voluntarioId?"".concat(null==(a=e.voluntarioId)?void 0:a.nombre," ").concat(null==(l=e.voluntarioId)?void 0:l.apellido):"(sin supervisor)",e.ayudanteId?" \xb7 T\xe9cnico: ".concat(null==(n=e.ayudanteId)?void 0:n.nombre," ").concat(null==(i=e.ayudanteId)?void 0:i.apellido):""]})]}),(0,s.jsxs)("div",{className:"text-right text-sm text-[color:var(--foreground)] min-w-[200px]",children:[(0,s.jsxs)("div",{children:["Para: ",new Date(e.asignadoFecha).toLocaleDateString()]}),(0,s.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,s.jsx)("div",{className:"progress flex-1",children:(0,s.jsx)("span",{style:{width:"0%"}})}),(0,s.jsx)("div",{className:"text-xs text-[color:var(--muted)]",children:"Pendiente"})]})]})]},e._id)})})]})}}},e=>{e.O(0,[2619,8441,1255,7358],()=>e(e.s=7802)),_N_E=e.O()}]);