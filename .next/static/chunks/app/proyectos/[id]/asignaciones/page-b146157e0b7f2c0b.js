(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7514],{63:(e,s,a)=>{"use strict";var l=a(7260);a.o(l,"useParams")&&a.d(s,{useParams:function(){return l.useParams}}),a.o(l,"usePathname")&&a.d(s,{usePathname:function(){return l.usePathname}}),a.o(l,"useRouter")&&a.d(s,{useRouter:function(){return l.useRouter}}),a.o(l,"useSearchParams")&&a.d(s,{useSearchParams:function(){return l.useSearchParams}})},3863:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var l=a(5155),i=a(63),t=a(1026),n=a(2115);let r=async e=>{let s=await fetch(e);if(!s.ok)return null;let a=await s.text();if(!a)return null;try{return JSON.parse(a)}catch(e){return null}};function d(){let e=(0,i.useParams)(),s=null==e?void 0:e.id,{data:a,mutate:d}=(0,t.Ay)(s?"/api/proyectos/".concat(s):null,r),{data:c}=(0,t.Ay)("/api/voluntarios",r),o=Array.isArray(c)?c:(null==c?void 0:c.items)||[],[m,u]=(0,n.useState)({supervisor:!1,tecnico:!1});async function x(e,l){if(!a)return;let i="voluntarioId"===e?"supervisor":"tecnico";u(e=>({...e,[i]:!0}));try{let a=await fetch("/api/proyectos/".concat(s),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify({[e]:l||null})});if(!a.ok)throw Error(await a.text());await d()}catch(e){alert("Error al actualizar asignaci\xf3n: ".concat((null==e?void 0:e.message)||e))}finally{u(e=>({...e,[i]:!1}))}}function h(e){return e&&o.find(s=>(s._id||s.id)===e)||null}if(!a)return(0,l.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,l.jsx)("div",{className:"text-center",children:(0,l.jsx)("div",{className:"text-lg font-medium",children:"Cargando asignaciones..."})})});let v=h(a.voluntarioId),p=h(a.ayudanteId);return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-xl font-semibold",children:"Asignaciones del proyecto"}),(0,l.jsx)("p",{className:"text-sm text-[color:var(--muted)] mt-1",children:"Gestiona qui\xe9n est\xe1 asignado a este proyecto"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"card p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"Supervisor"}),(0,l.jsx)("span",{className:"text-sm px-2 py-1 bg-blue-100 text-blue-800 rounded",children:"Responsable principal"})]}),v?(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,l.jsxs)("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:[v.nombre[0],v.apellido[0]]}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"font-medium",children:[v.nombre," ",v.apellido]}),v.email&&(0,l.jsx)("div",{className:"text-sm text-[color:var(--muted)]",children:v.email}),v.telefono&&(0,l.jsx)("div",{className:"text-sm text-[color:var(--muted)]",children:v.telefono})]})]}),(0,l.jsx)("button",{onClick:()=>x("voluntarioId",null),disabled:m.supervisor,className:"btn btn-ghost text-red-600 w-full",children:m.supervisor?"Removiendo...":"Remover supervisor"})]}):(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)("div",{className:"text-4xl mb-3",children:"\uD83D\uDC64"}),(0,l.jsx)("div",{className:"text-[color:var(--muted)] mb-4",children:"Sin supervisor asignado"}),(0,l.jsx)("div",{className:"space-y-2",children:(0,l.jsxs)("select",{onChange:e=>{let s=e.target.value;s&&x("voluntarioId",s)},disabled:m.supervisor,className:"select w-full",defaultValue:"",children:[(0,l.jsx)("option",{value:"",children:"Seleccionar supervisor"}),o.map(e=>(0,l.jsxs)("option",{value:e._id||e.id,children:[e.nombre," ",e.apellido]},e._id||e.id))]})})]})]}),(0,l.jsxs)("div",{className:"card p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"T\xe9cnico"}),(0,l.jsx)("span",{className:"text-sm px-2 py-1 bg-green-100 text-green-800 rounded",children:"Apoyo t\xe9cnico"})]}),p?(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,l.jsxs)("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white font-semibold",children:[p.nombre[0],p.apellido[0]]}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"font-medium",children:[p.nombre," ",p.apellido]}),p.email&&(0,l.jsx)("div",{className:"text-sm text-[color:var(--muted)]",children:p.email}),p.telefono&&(0,l.jsx)("div",{className:"text-sm text-[color:var(--muted)]",children:p.telefono})]})]}),(0,l.jsx)("button",{onClick:()=>x("ayudanteId",null),disabled:m.tecnico,className:"btn btn-ghost text-red-600 w-full",children:m.tecnico?"Removiendo...":"Remover t\xe9cnico"})]}):(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)("div",{className:"text-4xl mb-3",children:"\uD83D\uDD27"}),(0,l.jsx)("div",{className:"text-[color:var(--muted)] mb-4",children:"Sin t\xe9cnico asignado"}),(0,l.jsx)("div",{className:"space-y-2",children:(0,l.jsxs)("select",{onChange:e=>{let s=e.target.value;s&&x("ayudanteId",s)},disabled:m.tecnico,className:"select w-full",defaultValue:"",children:[(0,l.jsx)("option",{value:"",children:"Seleccionar t\xe9cnico"}),o.map(e=>(0,l.jsxs)("option",{value:e._id||e.id,children:[e.nombre," ",e.apellido]},e._id||e.id))]})})]})]})]}),(v||p)&&(0,l.jsxs)("div",{className:"card p-6",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Cambiar asignaciones"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium",children:"Cambiar supervisor"}),(0,l.jsxs)("select",{onChange:e=>{x("voluntarioId",e.target.value||null)},disabled:m.supervisor,className:"select w-full",value:a.voluntarioId||"",children:[(0,l.jsx)("option",{value:"",children:"Sin asignar"}),o.map(e=>(0,l.jsxs)("option",{value:e._id||e.id,children:[e.nombre," ",e.apellido]},e._id||e.id))]})]}),p&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium",children:"Cambiar t\xe9cnico"}),(0,l.jsxs)("select",{onChange:e=>{x("ayudanteId",e.target.value||null)},disabled:m.tecnico,className:"select w-full",value:a.ayudanteId||"",children:[(0,l.jsx)("option",{value:"",children:"Sin asignar"}),o.map(e=>(0,l.jsxs)("option",{value:e._id||e.id,children:[e.nombre," ",e.apellido]},e._id||e.id))]})]})]})]}),(0,l.jsxs)("div",{className:"card p-6",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Voluntarios disponibles"}),o.length>0?(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(e=>{let s=(e._id||e.id)===a.voluntarioId||(e._id||e.id)===a.ayudanteId;return(0,l.jsxs)("div",{className:"\n                    p-4 border rounded-lg transition-colors\n                    ".concat(s?"border-green-200 bg-green-50":"border-[color:var(--border)] hover:bg-gray-50","\n                  "),children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center text-sm font-semibold",children:[e.nombre[0],e.apellido[0]]}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("div",{className:"font-medium truncate",children:[e.nombre," ",e.apellido]}),e.email&&(0,l.jsx)("div",{className:"text-xs text-[color:var(--muted)] truncate",children:e.email})]})]}),s&&(0,l.jsx)("div",{className:"mt-2 text-xs text-green-700 font-medium",children:(e._id||e.id)===a.voluntarioId?"Supervisor asignado":"T\xe9cnico asignado"})]},e._id||e.id)})}):(0,l.jsx)("div",{className:"text-center py-8 text-[color:var(--muted)]",children:"No hay voluntarios disponibles"})]})]})}},6867:(e,s,a)=>{Promise.resolve().then(a.bind(a,3863))}},e=>{e.O(0,[1026,8441,1255,7358],()=>e(e.s=6867)),_N_E=e.O()}]);