(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4700],{63:(e,a,s)=>{"use strict";var t=s(7260);s.o(t,"useParams")&&s.d(a,{useParams:function(){return t.useParams}}),s.o(t,"usePathname")&&s.d(a,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(a,{useSearchParams:function(){return t.useSearchParams}})},8649:(e,a,s)=>{Promise.resolve().then(s.bind(s,8895))},8895:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>l});var t=s(5155),r=s(2115),n=s(63),u=s(2619),o=s.n(u);function l(){let e=(0,n.useRouter)(),a=(0,n.useSearchParams)(),s=a.get("token")||"",u=a.get("email")||"",[l,c]=(0,r.useState)(""),[i,d]=(0,r.useState)(""),[m,h]=(0,r.useState)(null),[p,x]=(0,r.useState)(!1),[f,b]=(0,r.useState)(!1);async function N(a){if(a.preventDefault(),h(null),l.length<6)return h("La contrase\xf1a debe tener al menos 6 caracteres");if(l!==i)return h("Las contrase\xf1as no coinciden");b(!0);try{if(!(await fetch("/api/auth/password/reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s,email:u,password:l})})).ok)throw Error("No se pudo actualizar");x(!0),setTimeout(()=>e.replace("/signin"),1500)}catch(e){h("No se pudo restablecer la contrase\xf1a")}finally{b(!1)}}return(0,r.useEffect)(()=>{s&&u||h("Enlace inv\xe1lido")},[s,u]),(0,t.jsxs)("div",{className:"max-w-md mx-auto mt-16",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Restablecer contrase\xf1a"}),p?(0,t.jsx)("p",{className:"text-sm",children:"Contrase\xf1a actualizada. Redirigiendoâ€¦"}):(0,t.jsxs)(t.Fragment,{children:[s&&u?null:(0,t.jsxs)("p",{className:"text-sm mb-4",children:["Enlace inv\xe1lido. Solicita uno nuevo en"," ",(0,t.jsx)(o(),{href:"/forgot-password",className:"underline",children:"Recuperar contrase\xf1a"}),"."]}),(0,t.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm mb-1",children:"Nueva contrase\xf1a"}),(0,t.jsx)("input",{type:"password",value:l,onChange:e=>c(e.target.value),className:"w-full border rounded px-3 py-2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm mb-1",children:"Confirmar contrase\xf1a"}),(0,t.jsx)("input",{type:"password",value:i,onChange:e=>d(e.target.value),className:"w-full border rounded px-3 py-2"})]}),m&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:m}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 rounded bg-foreground text-background",disabled:f||!s||!u,children:f?"Guardando...":"Guardar"})]})]})]})}}},e=>{e.O(0,[2619,8441,1255,7358],()=>e(e.s=8649)),_N_E=e.O()}]);